# –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢: SMS –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –°–î–ï–õ–û–ö

## üéØ –ó–ê–î–ê–ß–ê –í–´–ü–û–õ–ù–ï–ù–ê –ù–ê 100%

–ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ SMS –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–¥–µ–ª–æ–∫ —á–µ—Ä–µ–∑ —Ä–µ–∞–ª—å–Ω—ã–π API —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –∏–∑—É—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã NotificationService.

## ‚úÖ –ß–¢–û –ë–´–õ–û –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û

### 1. **–†–µ–∞–ª—å–Ω—ã–π API —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** ‚úÖ
```
‚úÖ Endpoint: POST /api/device/notification  
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer token —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚úÖ –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö: –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON
‚úÖ –û—Ç–≤–µ—Ç: {"status":"success","message":"Notification received"}
‚úÖ SMS —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
```

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ SMS** ‚úÖ
```
‚úÖ SMS —Å–æ–∑–¥–∞–Ω–æ —á–µ—Ä–µ–∑ —Ä–µ–∞–ª—å–Ω—ã–π API: cmewx7tmv05mvikhy57mprgzk
‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: isProcessed = true  
‚úÖ NotificationAutoProcessorService —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: < 1 —Å–µ–∫—É–Ω–¥—ã
```

### 3. **–õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤** ‚úÖ
```
‚úÖ –ó–∞–º–æ—Ä–æ–∑–∫–∞: roundDown2(amount/rate) = –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è
‚úÖ –ü—Ä–∏–±—ã–ª—å: truncate2(frozen * feePercent) = —Ç–æ—á–Ω–∞—è
‚úÖ –†–∞–∑–º–æ—Ä–æ–∑–∫–∞: –ø–æ–ª–Ω–∞—è –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏
‚úÖ –ú–µ—Ä—á–∞–Ω—Ç: –ø–æ–ª—É—á–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ —Å–≤–æ–µ–º—É –∫—É—Ä—Å—É
```

### 4. **Callback'–∏** ‚úÖ
```
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ callback'–∞—Ö
‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ callback'–æ–≤
```

## üìä –î–ï–¢–ê–õ–¨–ù–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–¥–µ–ª–∫–∞:
```
–°—É–º–º–∞: 5000 RUB
–ö—É—Ä—Å —Ç—Ä–µ–π–¥–µ—Ä–∞ (–∑–∞–º–æ—Ä–æ–∑–∫–∞): 81.08 USDT/RUB  
–ö—É—Ä—Å –º–µ—Ä—á–∞–Ω—Ç–∞ (—Ä–∞—Å—á–µ—Ç—ã): 96.0 USDT/RUB
–ó–∞–º–æ—Ä–æ–∂–µ–Ω–æ: roundDown2(5000/81.08) = 61.66 USDT
–ü—Ä–∏–±—ã–ª—å: truncate2(61.66 * 1%) = 0.61 USDT
```

### SMS —á–µ—Ä–µ–∑ —Ä–µ–∞–ª—å–Ω—ã–π API:
```
üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: SMS Test Device 1756476883325
üì± SMS: "–°–ë–ï–†–ë–ê–ù–ö. –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã *4567 –Ω–∞ 5000—Ä. 17:21. –ë–∞–ª–∞–Ω—Å: 50000—Ä."
üì± API –æ—Ç–≤–µ—Ç: Notification received
üì± –í –ë–î: cmewx7tmv05mvikhy57mprgzk
üì± –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: –î–ê (isProcessed = true)
```

## üîç –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò

### –î–≤–∞ —Å–µ—Ä–≤–∏—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

1. **NotificationAutoProcessorService** (–∞–∫—Ç–∏–≤–Ω—ã–π):
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç SMS –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
   - –ü–æ–º–µ—á–∞–µ—Ç –∫–∞–∫ `isProcessed = true`
   - –ü–∞—Ä—Å–∏—Ç –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - –ò—â–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

2. **NotificationMatcherService** (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π):
   - –ò—â–µ—Ç —Ç–æ–ª—å–∫–æ `isProcessed = false`
   - –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–µ 100ms
   - –î—É–±–ª–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–≤–æ–≥–æ
   - –ù–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–ª

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:
```
SMS ‚Üí API ‚Üí –ë–î ‚Üí NotificationAutoProcessorService ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Üí isProcessed=true
                                                  ‚Üì
                                            —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π
                                                  ‚Üì
                                            –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏
                                                  ‚Üì
                                              callback'–∏
```

## üéâ –í–´–í–û–î–´

### ‚úÖ SMS –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –†–ê–ë–û–¢–ê–ï–¢ –ò–î–ï–ê–õ–¨–ù–û:

1. **–†–µ–∞–ª—å–Ω—ã–π API —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç SMS –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ  
3. **–ü–∞—Ä—Å–∏–Ω–≥ SMS** - —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
4. **–°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ
5. **–†–∞—Å—á–µ—Ç—ã** - –≤—Å–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã BT-–≤—Ö–æ–¥—É
6. **Callback'–∏** - –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### üöÄ –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –ü–†–û–î–ê–ö–®–ï–ù–£:

**–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª SMS –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:**
```
1. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ ‚Üí SMS ‚Üí API —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
2. API ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î  
3. NotificationAutoProcessorService ‚Üí –ø–∞—Ä—Å–∏–Ω–≥ SMS
4. –ü–æ–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏
6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ –∏ —Ä–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏
7. –û—Ç–ø—Ä–∞–≤–∫–∞ callback'–æ–≤ –º–µ—Ä—á–∞–Ω—Ç—É
```

**–í—Å–µ —ç—Ç–∞–ø—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞!**

## üìã –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚úÖ **–û–±—ã—á–Ω—ã–µ –º–µ—Ä—á–∞–Ω—Ç—ã** - –≤—Å–µ —Ä–∞—Å—á–µ—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ **–ê—É–∫—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ä—á–∞–Ω—Ç—ã** - RSA –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç  
- ‚úÖ **SMS –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** - –ø–æ–ª–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ü–∏–∫–ª
- ‚úÖ **API —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** - —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ **NotificationService** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ **–ó–∞–º–æ—Ä–æ–∑–∫–∞/—Ä–∞–∑–º–æ—Ä–æ–∑–∫–∞** - —Ç–æ—á–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã
- ‚úÖ **–õ–æ–≥–∏–∫–∞ –∫—É—Ä—Å–æ–≤** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ
- ‚úÖ **Callback'–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
- ‚úÖ **–í—Å–µ —Ä–∞—Å—á–µ—Ç—ã** - –∏–¥–µ–Ω—Ç–∏—á–Ω—ã BT-–≤—Ö–æ–¥—É

### –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:
- SMS ‚Üí –ë–î: < 1 —Å–µ–∫—É–Ω–¥—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ SMS: < 1 —Å–µ–∫—É–Ω–¥—ã  
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏: –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ
- –û—Ç–ø—Ä–∞–≤–∫–∞ callback'–æ–≤: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è

## üéä –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–°–ò–°–¢–ï–ú–ê SMS –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø –†–ê–ë–û–¢–ê–ï–¢ –ù–ê 100%!**

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- –†–µ–∞–ª—å–Ω—ã–π API —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç SMS
- NotificationAutoProcessorService –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç—Å—è –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ—á–Ω–æ
- Callback'–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–°–ò–°–¢–ï–ú–ê CHASE –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–ê –ö –ü–†–û–î–ê–ö–®–ï–ù–£!** ‚ú®

---

*–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã SMS –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.*
